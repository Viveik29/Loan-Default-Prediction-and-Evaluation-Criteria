schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/Data_ingestion.py
    deps:
    - path: src/Data_ingestion.py
      hash: md5
      md5: cbdecc92df224cc3200d40b2306b63a1
      size: 1690
    params:
      params.yaml:
        data_ingestion:
          bucket_name: viveik-bucket
          folder_path: Loan_Default_Prediction_Evaluation_Criteria
          file_name: Dataset.csv
          Key: Loan_Default_Prediction_Evaluation_Criteria/Dataset.csv
          aws_access_key_id: AKIAVRNDDVLT2CSO3EWG
          aws_secret_access_key: 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
          region_name: eu-north-1
          test_size: 0.2
          output_path: Raw_DATA/Dataset.csv
    outs:
    - path: RAW_DATA/Raw/df_test.csv
      hash: md5
      md5: 2c2d825ebb1d07f84661f34912d70770
      size: 5213665
    - path: RAW_DATA/Raw/df_train.csv
      hash: md5
      md5: f420ca42df6dc06d291ed014538c31c9
      size: 20836830
  data_preprocessing:
    cmd: python src/Data_preprocessing.py
    deps:
    - path: RAW_DATA/Raw/df_test.csv
      hash: md5
      md5: 2c2d825ebb1d07f84661f34912d70770
      size: 5213665
    - path: RAW_DATA/Raw/df_train.csv
      hash: md5
      md5: f420ca42df6dc06d291ed014538c31c9
      size: 20836830
    - path: src/data_preprocessing.py
      hash: md5
      md5: 17dfa7fda02a9c6f23ff5602bd3f292a
      size: 6495
    params:
      params.yaml:
        data_preprocessing:
          lowercase: true
          max_len: 250
    outs:
    - path: Raw_data/df_clean.csv
      hash: md5
      md5: e9306874084a5bdf8d73f29a39b0faee
      size: 33285500
  feature_engineering:
    cmd: python src/feature_engineering.py
    deps:
    - path: Raw_data/df_clean.csv
      hash: md5
      md5: e9306874084a5bdf8d73f29a39b0faee
      size: 33285500
    - path: Raw_data/df_clean.csv
      hash: md5
      md5: e9306874084a5bdf8d73f29a39b0faee
      size: 33285500
    - path: src/feature_engineering.py
      hash: md5
      md5: 743c0ca06be6b909fde151c13d96a82e
      size: 1262
    params:
      params.yaml:
        feature_engineering:
          ngram_range:
          - 1
          - 2
          max_features: 10000
    outs:
    - path: RAW_DATA/Clearn_data/X_test.csv
      hash: md5
      md5: 639a51c38e4d175c33916d655c4482ec
      size: 6387463
    - path: RAW_DATA/Clearn_data/X_train.csv
      hash: md5
      md5: 10b1d832e772a34220042f34a054ecfa
      size: 25548587
    - path: RAW_DATA/Clearn_data/y_test.csv
      hash: md5
      md5: 8e63e6e4b2d7793839710957dac62d4d
      size: 58500
    - path: RAW_DATA/Clearn_data/y_train.csv
      hash: md5
      md5: 57158bafbf1344a27053291714908da9
      size: 233970
  model_trainning:
    cmd: python src/model_trainning.py
    deps:
    - path: RAW_DATA/Clearn_data/X_test.csv
      hash: md5
      md5: 639a51c38e4d175c33916d655c4482ec
      size: 6387463
    - path: RAW_DATA/Clearn_data/X_train.csv
      hash: md5
      md5: 10b1d832e772a34220042f34a054ecfa
      size: 25548587
    - path: src/model_trainning.py
      hash: md5
      md5: 09f75beb3fc2988b8b9c310ebc4414a0
      size: 1278
    params:
      params.yaml:
        model_trainning:
          model_type: RandomForestClassifier
          test_size: 0.2
          random_state: 42
          n_estimators: 100
    outs:
    - path: Models/model.pkl
      hash: md5
      md5: ade278cbf47bc20d5de97d7f1868ef23
      size: 85689738
  model_evaluation:
    cmd: python src/model_evaluation.py
    deps:
    - path: Models/model.pkl
      hash: md5
      md5: ade278cbf47bc20d5de97d7f1868ef23
      size: 85689738
    - path: RAW_DATA/Clearn_data/X_test.csv
      hash: md5
      md5: 639a51c38e4d175c33916d655c4482ec
      size: 6387463
    - path: RAW_DATA/Clearn_data/y_test.csv
      hash: md5
      md5: 8e63e6e4b2d7793839710957dac62d4d
      size: 58500
    - path: src/model_evaluation.py
      hash: md5
      md5: a977b03e74e565c133148c74fa8ab1e3
      size: 3897
    params:
      params.yaml:
        model_evaluation:
          threshold: 0.5
          metrics_output: report/metrics.json
    outs:
    - path: report/metrics.json
      hash: md5
      md5: 1ce0c3f04cb697fb5f91050ca4cfcd8e
      size: 182
  model_registry:
    cmd: python src/model_registry.py
    deps:
    - path: report/experiment_info.json
      hash: md5
      md5: 970ae28185a5b0942c1d57eb3caf8e1c
      size: 82
    - path: src/model_registry.py
      hash: md5
      md5: c5228519cb235e521737d2cfacfbc1d0
      size: 1965
    params:
      params.yaml:
        model_registry:
          registry_path: report/experiment_info.json
          model_name: my_model
