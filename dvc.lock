schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/Data_ingestion.py
    deps:
    - path: src/Data_ingestion.py
      hash: md5
      md5: 30ab1fc2f2f661d197912db1b667dbe4
      size: 1984
    params:
      params.yaml:
        data_ingestion:
          bucket_name: viveik-bucket
          folder_path: Loan_Default_Prediction_Evaluation_Criteria
          file_name: Dataset.csv
          Key: Loan_Default_Prediction_Evaluation_Criteria/Dataset.csv
          region_name: eu-north-1
          test_size: 0.2
          output_path: Raw_DATA/Dataset.csv
    outs:
    - path: RAW_DATA/Raw/df_test.csv
      hash: md5
      md5: 2c2d825ebb1d07f84661f34912d70770
      size: 5213665
    - path: RAW_DATA/Raw/df_train.csv
      hash: md5
      md5: f420ca42df6dc06d291ed014538c31c9
      size: 20836830
  data_preprocessing:
    cmd: python src/Data_preprocessing.py
    deps:
    - path: RAW_DATA/Raw/df_test.csv
      hash: md5
      md5: 2c2d825ebb1d07f84661f34912d70770
      size: 5213665
    - path: RAW_DATA/Raw/df_train.csv
      hash: md5
      md5: f420ca42df6dc06d291ed014538c31c9
      size: 20836830
    - path: src/Data_preprocessing.py
      hash: md5
      md5: a04244f7d0301aba638cad9ab38c6647
      size: 6353
    params:
      params.yaml:
        data_preprocessing:
          lowercase: true
          max_len: 250
    outs:
    - path: RAW_DATA/df_clean.csv
      hash: md5
      md5: e9306874084a5bdf8d73f29a39b0faee
      size: 33285500
  feature_engineering:
    cmd: python src/feature_engineering.py
    deps:
    - path: RAW_DATA/df_clean.csv
      hash: md5
      md5: e9306874084a5bdf8d73f29a39b0faee
      size: 33285500
    - path: src/feature_engineering.py
      hash: md5
      md5: cda7b6f434409a37e5223a06d1f8dfa5
      size: 1320
    params:
      params.yaml:
        feature_engineering:
          ngram_range:
          - 1
          - 2
          max_features: 10000
    outs:
    - path: RAW_DATA/Clearn_data/X_test.csv
      hash: md5
      md5: 639a51c38e4d175c33916d655c4482ec
      size: 6387463
    - path: RAW_DATA/Clearn_data/X_train.csv
      hash: md5
      md5: 10b1d832e772a34220042f34a054ecfa
      size: 25548587
    - path: RAW_DATA/Clearn_data/y_test.csv
      hash: md5
      md5: 8e63e6e4b2d7793839710957dac62d4d
      size: 58500
    - path: RAW_DATA/Clearn_data/y_train.csv
      hash: md5
      md5: 57158bafbf1344a27053291714908da9
      size: 233970
  model_trainning:
    cmd: python src/model_trainning.py
    deps:
    - path: RAW_DATA/Clearn_data/X_test.csv
      hash: md5
      md5: 639a51c38e4d175c33916d655c4482ec
      size: 6387463
    - path: RAW_DATA/Clearn_data/X_train.csv
      hash: md5
      md5: 10b1d832e772a34220042f34a054ecfa
      size: 25548587
    - path: src/model_trainning.py
      hash: md5
      md5: e4590fbe6beb3aa47ac957a9e29d6ccd
      size: 1488
    params:
      params.yaml:
        model_trainning:
          model_type: RandomForestClassifier
          test_size: 0.2
          random_state: 42
          n_estimators: 100
    outs:
    - path: Models/model.pkl
      hash: md5
      md5: 15085fd83b47cefb089e2593150d0521
      size: 85754230
  model_evaluation:
    cmd: python src/model_evaluation.py
    deps:
    - path: Models/model.pkl
      hash: md5
      md5: 15085fd83b47cefb089e2593150d0521
      size: 85754230
    - path: RAW_DATA/Clearn_data/X_test.csv
      hash: md5
      md5: 639a51c38e4d175c33916d655c4482ec
      size: 6387463
    - path: RAW_DATA/Clearn_data/y_test.csv
      hash: md5
      md5: 8e63e6e4b2d7793839710957dac62d4d
      size: 58500
    - path: src/model_evaluation.py
      hash: md5
      md5: d825fe4e46dae23c447c7f4a0f2c4e04
      size: 7989
    params:
      params.yaml:
        model_evaluation:
          metrics_output: report/metrics.json
    outs:
    - path: report/metrics.json
      hash: md5
      md5: e725fafb89a29eb6c6f1655893b66459
      size: 181
  model_registry:
    cmd: python src/model_registry.py
    deps:
    - path: report/metrics.json
      hash: md5
      md5: e725fafb89a29eb6c6f1655893b66459
      size: 181
    - path: src/model_registry.py
      hash: md5
      md5: ad71e6ddc8160cc4acec64b8a7b4ffcd
      size: 9533
    params:
      params.yaml:
        model_registry:
          registry_path: report/experiment_info.json
          model_name: loan-default-model
